# Логика использования HTML и Markdown в шаблонах документов

## Общая концепция

Шаблоны документов используют **HTML** для форматирования, потому что:

1. **Финальный документ отображается в браузере** - HTML позволяет точно контролировать внешний вид
2. **Генерация PDF** - HTML легко конвертируется в PDF через браузерный API печати
3. **Стилизация** - CSS позволяет создавать профессионально оформленные документы
4. **Переменные** - HTML шаблоны поддерживают подстановку переменных `{{variable_name}}`

## Структура шаблона

### HTML шаблон содержит:

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    /* CSS стили для красивого оформления */
    body { font-family: Arial, sans-serif; }
    h1 { text-align: center; }
  </style>
</head>
<body>
  <h1>ТРУДОВОЙ ДОГОВОР</h1>
  <p>Сотрудник: {{employee_name}}</p>
  <!-- Переменные заменяются при создании документа -->
</body>
</html>
```

### Переменные в шаблонах

- Формат: `{{variable_name}}`
- Примеры: `{{employee_name}}`, `{{salary}}`, `{{date}}`
- При создании документа из шаблона переменные заменяются на реальные значения

## Почему не Markdown?

**Markdown** был бы проще для написания, но:

1. ❌ **Ограниченное форматирование** - сложно создать официальный документ с точным форматированием
2. ❌ **Проблемы с PDF** - конвертация Markdown → PDF требует дополнительных библиотек
3. ❌ **Стилизация** - сложно контролировать внешний вид (отступы, шрифты, цвета)
4. ✅ **HTML** - полный контроль над оформлением, легко генерировать PDF

## Процесс работы с шаблонами

### 1. Создание шаблона (админ)
- Вводит HTML код с переменными
- Указывает переменные в JSON формате:
  ```json
  [
    {"name": "employee_name", "label": "ФИО сотрудника", "type": "text", "required": true},
    {"name": "salary", "label": "Оклад", "type": "number", "required": true}
  ]
  ```

### 2. Создание документа из шаблона
- Пользователь выбирает шаблон
- Заполняет переменные через форму
- Система заменяет `{{variable_name}}` на значения
- Создается документ с готовым HTML

### 3. Отображение документа
- HTML рендерится в браузере через `dangerouslySetInnerHTML`
- Документ выглядит профессионально оформленным
- Можно скачать как PDF через браузерную печать

## Примеры использования

### Трудовой договор
- HTML с таблицами, подписями, нумерацией
- Стили для официального вида
- Переменные: ФИО, должность, оклад, даты

### Приказ
- Простой HTML с заголовком
- Переменные: номер приказа, дата, ФИО

### Справка
- Минимальное форматирование
- Переменные: ФИО, дата выдачи, должность

## Безопасность

⚠️ **Важно**: HTML рендерится через `dangerouslySetInnerHTML`, поэтому:
- Только админы могут создавать/редактировать шаблоны
- Переменные санитизируются перед подстановкой
- Пользователи не могут вводить произвольный HTML

## Альтернативы (не используются)

### Markdown
- ❌ Слишком просто для официальных документов
- ❌ Нет точного контроля форматирования

### PDF напрямую
- ❌ Сложно редактировать
- ❌ Нет переменных
- ❌ Требует специальные библиотеки

### DOCX
- ❌ Требует серверную обработку
- ❌ Сложнее работать в браузере

## Вывод

**HTML** выбран как оптимальный формат, потому что:
- ✅ Полный контроль над оформлением
- ✅ Легко генерировать PDF
- ✅ Работает в браузере без дополнительных библиотек
- ✅ Поддержка переменных для динамического контента
- ✅ Профессиональный внешний вид документов



