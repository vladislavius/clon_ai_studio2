# –ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã, –Ω–æ –Ω–µ –≤–∏–¥–Ω—ã

## ‚úÖ –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü (–í–´–ü–û–õ–ù–ï–ù–û)

–¢–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
- ‚úÖ `onboarding_templates`
- ‚úÖ `onboarding_instances`
- ‚úÖ `onboarding_tasks`

---

## üîß –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞ —Å—Ö–µ–º—ã

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `FINAL_FIX_ONBOARDING.sql` –≤ SQL Editor Supabase.

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
2. –í–∫–ª—é—á–∏—Ç RLS –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
3. **–û–ë–ù–û–í–ò–¢ –ö–ï–® –°–•–ï–ú–´ POSTGREST** (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!)
4. –ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–ª–∏—Ç–∏–∫

---

## ‚è±Ô∏è –®–∞–≥ 3: –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 —Å–µ–∫—É–Ω–¥

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `NOTIFY pgrst, 'reload schema';` –ø–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã PostgREST –æ–±–Ω–æ–≤–∏–ª –∫–µ—à.

---

## üîÑ –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞:
   - **Windows/Linux:** Ctrl+Shift+R
   - **Mac:** Cmd+Shift+R
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)

---

## ‚úÖ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
- ‚ùå **–ë—ã–ª–æ:** `Failed to load resource: the server responded with a status of 400`
- ‚úÖ **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** –ù–µ—Ç –æ—à–∏–±–æ–∫, –∏–ª–∏ `–¢–∞–±–ª–∏—Ü–∞ onboarding_instances –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤` (–Ω–æ –±–µ–∑ –æ—à–∏–±–∫–∏ 400)

---

## üîç –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –≤—Ä—É—á–Ω—É—é

–í—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
SELECT tablename, policyname, cmd
FROM pg_policies
WHERE schemaname = 'public' 
  AND tablename = 'onboarding_instances';
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 4 –ø–æ–ª–∏—Ç–∏–∫–∏:
- "Admins can manage onboarding instances" (ALL)
- "Users can read their own onboarding instances" (SELECT)
- "Admins can create onboarding instances" (INSERT)
- "Users can update their own onboarding instances" (UPDATE)

### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏

–ï—Å–ª–∏ –ø–æ–ª–∏—Ç–∏–∫ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞ `create_onboarding_tables.sql` —Å –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ (—Å—Ç—Ä–æ–∫–∏ 134-182).

### –í–∞—Ä–∏–∞–Ω—Ç C: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ RLS –¥–ª—è —Ç–µ—Å—Ç–∞

‚ö†Ô∏è **–¢–æ–ª—å–∫–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏!**

```sql
-- –û—Ç–∫–ª—é—á–∏—Ç—å RLS
ALTER TABLE onboarding_instances DISABLE ROW LEVEL SECURITY;

-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ - –µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –ø–æ–ª–∏—Ç–∏–∫–∞—Ö

-- –í–ö–õ–Æ–ß–ò–¢–ï –æ–±—Ä–∞—Ç–Ω–æ:
ALTER TABLE onboarding_instances ENABLE ROW LEVEL SECURITY;
```

---

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ö–µ—à —Å—Ö–µ–º—ã** - —ç—Ç–æ —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã
2. –ü–æ—Å–ª–µ `NOTIFY pgrst, 'reload schema';` **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 —Å–µ–∫—É–Ω–¥**
3. **–û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞** –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **Service Worker**, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å Ctrl+Shift+R

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- ‚úÖ –û—à–∏–±–∫–∞ 400 –∏—Å—á–µ–∑–Ω–µ—Ç
- ‚úÖ –í–∫–ª–∞–¥–∫–∞ "–û–Ω–±–æ—Ä–¥–∏–Ω–≥" –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –ú–æ–∂–Ω–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –∏ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

