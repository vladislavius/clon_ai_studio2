-- ============================================================================
-- ПОЛНОЕ ЗАПОЛНЕНИЕ ДАННЫХ ДЛЯ ВСЕХ ДЕПАРТАМЕНТОВ И ОТДЕЛОВ
-- ============================================================================
-- Этот скрипт заполняет данные для всех 7 департаментов и их отделов
-- с полной информацией из предоставленных изображений
-- ============================================================================

-- ============================================================================
-- ДЕПАРТАМЕНТ 1: ПОСТРОЕНИЯ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept1',
  'Директор по персоналу',
  'Создание сильной и продуктивной команды',
  'Продуктивный и эффективный штат сотрудников',
  'Строители Организации и кадров.',
  'Мы — инженеры и архитекторы человеческих систем. Мы наблюдаем потоки в компании, находим «узкие места», проектируем и создаем структуру, а затем наполняем ее самым ценным ресурсом — продуктивными и этичными людьми. Наша задача — возвести прочное, эффективное и стабильное организационное здание, где каждый сотрудник будет продуктивным и сможет реализовать свой потенциал.',
  '{
    "name": "1. Построения",
    "fullName": "1. Департамент Построения",
    "description": "Строители Организации и кадров.",
    "longDescription": "Мы — инженеры и архитекторы человеческих систем. Мы наблюдаем потоки в компании, находим «узкие места», проектируем и создаем структуру, а затем наполняем ее самым ценным ресурсом — продуктивными и этичными людьми. Наша задача — возвести прочное, эффективное и стабильное организационное здание, где каждый сотрудник будет продуктивным и сможет реализовать свой потенциал.",
    "mainStat": "Количество введенных в должность продуктивных сотрудников — показатель способности департамента обеспечить компанию квалифицированным персоналом",
    "functions": [
      "Найм и адаптация персонала",
      "Обеспечение коммуникаций",
      "Контроль эффективности персонала",
      "Обучение и развитие сотрудников"
    ],
    "troubleSigns": [
      "Высокая текучесть кадров",
      "Снижение эффективности с ростом штата",
      "Неясность функций сотрудников",
      "Хаос в документообороте",
      "Долгая адаптация новичков",
      "Отсутствие системы оценки"
    ],
    "developmentActions": [
      "Создать актуальную оргсхему с именами",
      "Сформировать должностные папки",
      "Наладить еженедельный сбор статистик",
      "Организовать работу приемной",
      "Внедрить систему поощрений",
      "Провести анализ узких мест в найме"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 1 - Управление персоналом
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept1_1',
  'Нач. Найма',
  'Эффективные штатные сотрудники',
  '{
    "name": "Отдел 1 - Управление персоналом",
    "code": "1",
    "description": "Отдел отвечает за управление персоналом, кадровый учет и создание должностных инструкций",
    "mainStat": "Баллы по кадровому учету, создание должностных инструкций"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 2 - Коммуникации
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept1_2',
  'Офис-менеджер',
  'Бесперебойные коммуникации',
  '{
    "name": "Отдел 2 - Коммуникации",
    "code": "2",
    "description": "Отдел обеспечивает эффективную коммуникацию между всеми подразделениями компании",
    "mainStat": "Обработанные запросы в службу поддержки"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 3 - Эффективность персонала
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept1_3',
  'Инспектор',
  'Стабильные и ценные сотрудники',
  '{
    "name": "Отдел 3 - Эффективность персонала",
    "code": "3",
    "description": "Отдел контролирует эффективность работы персонала и отслеживает показатели роста",
    "mainStat": "Персонал с растущими показателями"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 2: КОММЕРЧЕСКИЙ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept2',
  'Коммерческий директор',
  'Максимизация доходов компании через эффективные продажи и продвижение услуг',
  'Прибыль от продаж туристических услуг, превышающая операционные расходы компании',
  'Продажи и Продвижение.',
  'Голос и Двигатель Компании. Наша миссия — донести ценность наших услуг до внешнего мира, установить с ним обмен и обеспечить компанию доходом. Мы не просто продаем; мы создаем жизненную энергию для всей компании. Именно поэтому наша ответственность и наш вклад так велики.',
  '{
    "name": "2. Коммерческий",
    "fullName": "2. Коммерческий Департамент",
    "description": "Продажи и Продвижение.",
    "longDescription": "Голос и Двигатель Компании. Наша миссия — донести ценность наших услуг до внешнего мира, установить с ним обмен и обеспечить компанию доходом. Мы не просто продаем; мы создаем жизненную энергию для всей компании. Именно поэтому наша ответственность и наш вклад так велики.",
    "mainStat": "Валовой доход компании — основной показатель результативности отдела продаж и маркетинга, отражающий общую сумму поступлений от реализации туристических услуг",
    "functions": [
      "Маркетинг и продвижение услуг",
      "Публикация",
      "Консультирование клиентов",
      "Заключение сделок",
      "Ведение клиентской базы"
    ],
    "troubleSigns": [
      "Снижение количества новых клиентов",
      "Падение конверсии из лидов в продажи",
      "Рост стоимости привлечения клиента",
      "Отсутствие эффективных рекламных материалов",
      "Нерегулярные действия по продвижению",
      "Непредсказуемые продажи"
    ],
    "developmentActions": [
      "Установить контроль за откликами",
      "Проанализировать эффективность рекламы",
      "Разработать материалы по пониманию",
      "Составить план рекламных кампаний",
      "Наладить работу с базой клиентов",
      "Внедрить реалистичное планирование продаж"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 4 - Маркетинг
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept2_4',
  'Маркетолог',
  'Отклики потенциальных клиентов',
  '{
    "name": "Отдел 4 - Маркетинг",
    "code": "4",
    "description": "Отдел маркетинга отвечает за привлечение потенциальных клиентов через рекламу и продвижение",
    "mainStat": "Количество откликов на рекламу, Стоимость привлечения клиента, Конверсия от показов к откликам"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 5 - Понимания
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept2_5',
  'Контент-менеджер',
  'Клиенты, понимающие ценность продуктов',
  '{
    "name": "Отдел 5 - Понимания",
    "code": "5",
    "description": "Отдел обеспечивает понимание клиентами ценности продуктов и услуг компании",
    "mainStat": "Кол-во понятых информационных материалов, Кол-во туристов, получивших понимание"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 6 - Продаж
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept2_6',
  'РОП',
  'Валовой доход от продаж',
  '{
    "name": "Отдел 6 - Продаж",
    "code": "6",
    "description": "Отдел продаж работает с лидами, проводит переговоры и заключает сделки",
    "mainStat": "Объем продаж услуг, Конверсия из лида в продажу"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 3: ФИНАНСОВЫЙ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept3',
  'Фин. директор',
  'Обеспечение финансовой стабильности и роста компании',
  'Сохраненные и обладающие материальной ценностью активы и резервы компании',
  'Учет и распределение средств.',
  'Хранители и Распределители Энергии Компании. Мы обеспечиваем сохранение, рост и рациональное использование средств, создавая прозрачную и дисциплинированную систему, где каждый рубль работает как инвестиция в будущее процветание. Финансовая стабильность и жизнеспособность «Острова Сокровищ» зависят от нашей точности, дисциплины и проницательности.',
  '{
    "name": "3. Финансовый",
    "fullName": "3. Финансовый Департамент",
    "description": "Учет и распределение средств.",
    "longDescription": "Хранители и Распределители Энергии Компании. Мы обеспечиваем сохранение, рост и рациональное использование средств, создавая прозрачную и дисциплинированную систему, где каждый рубль работает как инвестиция в будущее процветание. Финансовая стабильность и жизнеспособность «Острова Сокровищ» зависят от нашей точности, дисциплины и проницательности.",
    "mainStat": "Размер защищенных активов компании — показатель финансовой стабильности и способности сохранять и приумножать материальные ценности компании",
    "functions": [
      "Управление доходами и их сбор",
      "Контроль расходов и платежей",
      "Учет всех активов и операций",
      "Финансовое планирование"
    ],
    "troubleSigns": [
      "Просроченная дебиторская задолженность",
      "Отсутствие актуальных данных о маржинальности",
      "Задержки в выплате заработной платы",
      "Потери денег и имущества",
      "Авралы в отчетные периоды",
      "Штрафы от контролирующих органов"
    ],
    "developmentActions": [
      "Составить долгосрочный бюджет",
      "Организовать учет дебиторской задолженности",
      "Наладить еженедельный подсчет маржинальности",
      "Провести инвентаризацию имущества",
      "Упорядочить складской учет",
      "Автоматизировать управленческую отчетность"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 7 - Управление доходами
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept3_7',
  'Кассир',
  'Своевременно собранные поступления',
  '{
    "name": "Отдел 7 - Управление доходами",
    "code": "7",
    "description": "Отдел отвечает за сбор и учет доходов компании",
    "mainStat": "Поступление платежей от клиентов"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 8 - Расходы
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept3_8',
  'Фин. менеджер',
  'Выполненные финансовые обязательства',
  '{
    "name": "Отдел 8 - Расходы",
    "code": "8",
    "description": "Отдел контролирует расходы и платежи компании",
    "mainStat": "Кредиторская задолженность (обратная)"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 9 - Учет
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept3_9',
  'Главбух',
  'Точные и доступные документы',
  '{
    "name": "Отдел 9 - Учет",
    "code": "9",
    "description": "Отдел ведет учет всех активов и операций компании",
    "mainStat": "Учтенные активы и резервы, Своевременные налоговые отчеты"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 4: ПРОИЗВОДСТВА
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept4',
  'Директор по производству',
  'Обеспечение безупречного качества предоставляемых услуг',
  'Довольные клиенты, получившие качественно предоставленные услуги, которые превосходят их ожидания',
  'Создание продукта и сервис.',
  'Создатели Впечатлений. Мы создаем незабываемые впечатления, безупречный сервис и яркие эмоции от путешествий на Пхукете. Наша миссия — безупречно предоставить каждую услугу, от трансфера из аэропорта до сложных многодневных круизов. Качество нашей работы напрямую влияет на репутацию компании и лояльность клиентов. Мы не просто проводим экскурсии — мы создаем ценность.',
  '{
    "name": "4. Производства",
    "fullName": "4. Департамент Производства",
    "description": "Создание продукта и сервис.",
    "longDescription": "Создатели Впечатлений. Мы создаем незабываемые впечатления, безупречный сервис и яркие эмоции от путешествий на Пхукете. Наша миссия — безупречно предоставить каждую услугу, от трансфера из аэропорта до сложных многодневных круизов. Качество нашей работы напрямую влияет на репутацию компании и лояльность клиентов. Мы не просто проводим экскурсии — мы создаем ценность.",
    "mainStat": "Объем качественно предоставленных услуг — общая стоимость предоставленных туристических услуг, отражающая производительность департамента",
    "functions": [
      "Бронирование туров и услуг",
      "Организация логистики/транспорта",
      "Предоставление экскурсий",
      "Координация с поставщиками"
    ],
    "troubleSigns": [
      "Срывы сроков выполнения заказов",
      "Овербукинг в отелях и на экскурсиях",
      "Технические сбои в бронированиях",
      "Опоздания и поломки транспорта",
      "Жалобы на качество обслуживания",
      "Низкие рейтинги от туристов"
    ],
    "developmentActions": [
      "Описать технологию предоставления услуг",
      "Наладить планирование деятельности",
      "Внедрить систему управления инвентарем",
      "Установить GPS-мониторинг транспорта",
      "Создать стандарты обслуживания",
      "Организовать ежедневные отчеты"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 10 - Бронирования
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept4_10',
  'Менеджер',
  'Забронированные и исполненные экскурсии/туры',
  '{
    "name": "Отдел 10 - Бронирования",
    "code": "10",
    "description": "Отдел отвечает за бронирование туров и экскурсий",
    "mainStat": "Количество забронированных туров"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 11 - Транспорта
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept4_11',
  'Логист',
  'Трансферы высокого качества вовремя и безопасно',
  '{
    "name": "Отдел 11 - Транспорта",
    "code": "11",
    "description": "Отдел организует транспортное обслуживание клиентов",
    "mainStat": "Количество успешных трансферов"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 12 - Предоставления
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept4_12',
  'Координатор',
  'Проведенные экскурсии превосходного качества, подтвержденные положительными отзывами туристов',
  '{
    "name": "Отдел 12 - Предоставления",
    "code": "12",
    "description": "Отдел обеспечивает предоставление экскурсий и туристических услуг",
    "mainStat": "Объем предоставленных услуг, % положительных отзывов"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 5: КАЧЕСТВА (КВАЛИФИКАЦИИ)
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept5',
  'Директор по качеству',
  'Обеспечение безупречного качества всех услуг и процессов',
  'Персонал и туристические продукты, полностью соответствующие высоким стандартам качества и безопасности',
  'Контроль и обучение.',
  'Хранители Качества и Мастерства. Мы — внутренний гарант качества, наставник и двигатель улучшений. Наша миссия — обеспечить, чтобы каждый сотрудник и каждая услуга компании «Остров Сокровищ» соответствовали высочайшим стандартам, превращая «хорошо» в «безупречно». Мы — иммунная система организации, выявляющая и устраняющая отклонения, слабости и некомпетентность, чтобы обеспечить здоровье и непрерывный рост эффективности.',
  '{
    "name": "5. Качества",
    "fullName": "5. Департамент Квалификации",
    "description": "Контроль и обучение.",
    "longDescription": "Хранители Качества и Мастерства. Мы — внутренний гарант качества, наставник и двигатель улучшений. Наша миссия — обеспечить, чтобы каждый сотрудник и каждая услуга компании «Остров Сокровищ» соответствовали высочайшим стандартам, превращая «хорошо» в «безупречно». Мы — иммунная система организации, выявляющая и устраняющая отклонения, слабости и некомпетентность, чтобы обеспечить здоровье и непрерывный рост эффективности.",
    "mainStat": "Процент продукта безупречного качества — доля туристических услуг, полностью соответствующих стандартам качества и ожиданиям клиентов",
    "functions": [
      "Контроль качества услуг",
      "Обучение персонала",
      "Совершенствование процессов",
      "Работа с претензиями клиентов"
    ],
    "troubleSigns": [
      "Рост жалоб клиентов",
      "Снижение рейтингов",
      "Нарушения стандартов качества",
      "Недовольные клиенты остаются неулаженными",
      "Отсутствие системы обучения",
      "Квалификация сотрудников не повышается"
    ],
    "developmentActions": [
      "Наладить улаживание недовольства клиентов",
      "Ввести регулярные опросы клиентов",
      "Разработать стандарты качества",
      "Организовать Совет по качеству",
      "Создать библиотеку обучающих материалов",
      "Составить программы обучения для каждого сотрудника"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 13 - Контроль качества
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept5_13',
  'ОКК',
  'Продукт, соответствующий стандартам качества',
  '{
    "name": "Отдел 13 - Контроль качества",
    "code": "13",
    "description": "Отдел контролирует качество предоставляемых услуг",
    "mainStat": "Маржинальная прибыль на сотрудника"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 14 - Обучение
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept5_14',
  'Тренер',
  'Компетентные, производящие сотрудники',
  '{
    "name": "Отдел 14 - Обучение",
    "code": "14",
    "description": "Отдел организует обучение и развитие персонала",
    "mainStat": "Завершенные программы обучения, Часы обучения персонала"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 15 - Совершенствование
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept5_15',
  'Методист',
  'Улучшенные процессы и стандарты',
  '{
    "name": "Отдел 15 - Совершенствование",
    "code": "15",
    "description": "Отдел занимается совершенствованием процессов и стандартов качества",
    "mainStat": "Задачи по повышению квалификации"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 6: РАСШИРЕНИЯ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept6',
  'Директор по развитию',
  'Обеспечение долгосрочного роста и доминирования на рынке',
  'Компания с устойчивым ростом и высокой рыночной узнаваемостью, обладающая позитивным имиджем и сильной репутацией в туристической отрасли, что обеспечивает стабильный приток новых клиентов',
  'PR и новые рынки.',
  'Голос, который слышит Весь Мир. Наша задача — сделать так, чтобы о компании «Остров Сокровищ» узнали все, чтобы наше имя ассоциировалось с качеством, надежностью и лучшим отдыхом на Пхукете. Мы не просто размещаем рекламу. Мы строим репутацию, создаем широкую известность и формируем мощный поток новых клиентов, которые приходят к нам не потому, что увидели скидку, а потому, что доверяют нашему имени. Мы создаем партнеров, которые с гордостью направляют к нам своих клиентов. Мы — стратегический рычаг, который обеспечивает компании долгосрочный рост и доминирование на рынке.',
  '{
    "name": "6. Расширения",
    "fullName": "6. Департамент Расширения",
    "description": "PR и новые рынки.",
    "longDescription": "Голос, который слышит Весь Мир. Наша задача — сделать так, чтобы о компании «Остров Сокровищ» узнали все, чтобы наше имя ассоциировалось с качеством, надежностью и лучшим отдыхом на Пхукете. Мы не просто размещаем рекламу. Мы строим репутацию, создаем широкую известность и формируем мощный поток новых клиентов, которые приходят к нам не потому, что увидели скидку, а потому, что доверяют нашему имени. Мы создаем партнеров, которые с гордостью направляют к нам своих клиентов. Мы — стратегический рычаг, который обеспечивает компании долгосрочный рост и доминирование на рынке.",
    "mainStat": "Количество новых клиентов и расширение области деятельности — показатель роста клиентской базы и развития новых направлений бизнеса",
    "functions": [
      "Связи с общественностью",
      "Вводные услуги для новых клиентов",
      "Работа с партнерами",
      "Формирование имиджа компании"
    ],
    "troubleSigns": [
      "Низкая узнаваемость компании",
      "Негативные отзывы в интернете",
      "Снижение новых клиентов",
      "Неэффективные партнерские программы",
      "Плохой внешний вид компании",
      "Отсутствие вводных услуг"
    ],
    "developmentActions": [
      "Привести в порядок внешний вид компании",
      "Написать заметки в СМИ о деятельности",
      "Организовать работу с довольными клиентами",
      "Выявить и развивать партнерские связи",
      "Провести опросы для выявления вводных услуг",
      "Начать продвижение вводных программ"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 16 - Связи с общественностью
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept6_16',
  'PR-менеджер',
  'Привлекательный имидж компании',
  '{
    "name": "Отдел 16 - Связи с общественностью",
    "code": "16",
    "description": "Отдел отвечает за формирование имиджа компании и работу со СМИ",
    "mainStat": "Индекс узнаваемости бренда"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 17 - Вводные услуги
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept6_17',
  'Менеджер',
  'Новые клиенты, довольные вводными услугами',
  '{
    "name": "Отдел 17 - Вводные услуги",
    "code": "17",
    "description": "Отдел предоставляет вводные услуги для новых клиентов",
    "mainStat": "Количество новых туристов"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 18 - Партнеры
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept6_18',
  'Партнер-менеджер',
  'Партнеры, направляющие клиентов',
  '{
    "name": "Отдел 18 - Партнеры",
    "code": "18",
    "description": "Отдел работает с партнерами и агентами",
    "mainStat": "Новые туристы от партнеров, Количество активных партнеров"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 7: АДМИНИСТРАТИВНЫЙ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept7',
  'Исполнительный Директор (ИД)',
  'Обеспечение стратегического управления и развития компании',
  'Процветающая и развивающаяся компания, производящая продукт безупречного качества',
  'Стратегическое планирование и надзор.',
  'Стратегическое управление и развитие. Департамент 7 не просто выполняет административные задачи, а определяет саму суть, цели и будущее компании. Он стоит в самом начале производственного потока, так как именно здесь рождаются идеи, стратегии и планы, которые затем реализуются всеми остальными подразделениями. Этот департамент — мозговой центр и управляющее ядро всей организации. Департамент 7 в первую очередь отвечает за «Бытийность» компании: кто мы есть, каковы наши цели, какими принципами мы руководствуемся, какой образ мы создаем.',
  '{
    "name": "7. Административный",
    "fullName": "7. Административный Департамент",
    "description": "Стратегическое планирование и надзор.",
    "longDescription": "Стратегическое управление и развитие. Департамент 7 не просто выполняет административные задачи, а определяет саму суть, цели и будущее компании. Он стоит в самом начале производственного потока, так как именно здесь рождаются идеи, стратегии и планы, которые затем реализуются всеми остальными подразделениями. Этот департамент — мозговой центр и управляющее ядро всей организации. Департамент 7 в первую очередь отвечает за «Бытийность» компании: кто мы есть, каковы наши цели, какими принципами мы руководствуемся, какой образ мы создаем.",
    "mainStat": "Соотношение \"Наличные / Счета к оплате\" — это ключевая статистика, отражающая финансовую стабильность",
    "functions": [
      "Формирование стратегии и идеологии компании",
      "Высший надзор за деятельностью",
      "Финансовая политика и контроль активов",
      "Юридическая защита и безопасность",
      "Координация всех департаментов"
    ],
    "troubleSigns": [
      "Отсутствие стратегического планирования",
      "Снижение финансовых резервов",
      "Юридические проблемы и риски",
      "Низкая координация между отделами",
      "Падение общей прибыльности",
      "Отсутствие долгосрочного видения"
    ],
    "developmentActions": [
      "Разработать стратегический план на год",
      "Провести аудит юридического соответствия",
      "Установить систему KPI для всех отделов",
      "Создать резервный фонд компании",
      "Наладить еженедельные совещания директоров",
      "Внедрить систему управленческой отчетности"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 19 - Исполнительный Директор
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept7_19',
  'ИД',
  'Жизнеспособная и прибыльная компания',
  '{
    "name": "Офис 19 - Исполнительный Директор",
    "code": "19",
    "description": "Офис исполнительного директора отвечает за операционное управление компанией",
    "mainStat": "Маржинальная прибыль от реализации туристических услуг"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 20 - Официальные Вопросы
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept7_20',
  'Юрист',
  'Безопасное и содействующее развитию компании окружение',
  '{
    "name": "Офис 20 - Официальные Вопросы",
    "code": "20",
    "description": "Офис отвечает за юридическую защиту и официальные вопросы компании",
    "mainStat": "Баллы по контрольному списку безопасности (юридическая защита, лицензии, налоги)"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 21 - Совет Директоров
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept7_21',
  'Учредитель',
  'Процветающая компания с растущими резервами',
  '{
    "name": "Офис 21 - Совет Директоров",
    "code": "21",
    "description": "Офис совета директоров отвечает за стратегическое планирование и развитие компании",
    "mainStat": "Соотношение \"наличные/счета к оплате\", Валовая выручка от туристических услуг, Средняя заработная плата персонала"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ПРОВЕРКА ЗАПОЛНЕННЫХ ДАННЫХ
-- ============================================================================

-- Проверить данные всех департаментов
SELECT 
  node_id,
  manager,
  goal,
  vfp,
  content->>'mainStat' as main_stat,
  content->>'description' as description,
  jsonb_array_length(COALESCE(content->'functions', '[]'::jsonb)) as functions_count,
  jsonb_array_length(COALESCE(content->'troubleSigns', '[]'::jsonb)) as trouble_signs_count,
  jsonb_array_length(COALESCE(content->'developmentActions', '[]'::jsonb)) as actions_count
FROM public.org_metadata
WHERE type = 'department'
ORDER BY node_id;

-- Проверить данные всех отделов
SELECT 
  node_id,
  manager,
  vfp,
  content->>'description' as description,
  content->>'mainStat' as main_stat
FROM public.org_metadata
WHERE type = 'subdepartment'
ORDER BY node_id;

