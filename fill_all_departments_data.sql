-- ============================================================================
-- ПОЛНОЕ ЗАПОЛНЕНИЕ ДАННЫХ ДЛЯ ВСЕХ ДЕПАРТАМЕНТОВ И ОТДЕЛОВ
-- ============================================================================
-- Этот скрипт заполняет данные для всех 7 департаментов и их отделов
-- с полной информацией из предоставленных изображений
-- ============================================================================

-- ============================================================================
-- ДЕПАРТАМЕНТ 1: ПОСТРОЕНИЯ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept1',
  'Директор по персоналу',
  'Создание сильной и продуктивной команды',
  'Продуктивный и эффективный штат сотрудников',
  'Строители Организации и кадров.',
  'Мы — инженеры и архитекторы человеческих систем. Мы наблюдаем потоки в компании, находим «узкие места», проектируем и создаем структуру, а затем наполняем ее самым ценным ресурсом — продуктивными и этичными людьми. Наша задача — возвести прочное, эффективное и стабильное организационное здание, где каждый сотрудник будет продуктивным и сможет реализовать свой потенциал.',
  '{
    "name": "1. Построения",
    "fullName": "1. Департамент Построения",
    "description": "Строители Организации и кадров.",
    "longDescription": "Мы — инженеры и архитекторы человеческих систем. Мы наблюдаем потоки в компании, находим «узкие места», проектируем и создаем структуру, а затем наполняем ее самым ценным ресурсом — продуктивными и этичными людьми. Наша задача — возвести прочное, эффективное и стабильное организационное здание, где каждый сотрудник будет продуктивным и сможет реализовать свой потенциал.",
    "mainStat": "Количество введенных в должность продуктивных сотрудников — показатель способности департамента обеспечить компанию квалифицированным персоналом",
    "functions": [
      "Найм и адаптация персонала",
      "Обеспечение коммуникаций",
      "Контроль эффективности персонала",
      "Обучение и развитие сотрудников"
    ],
    "troubleSigns": [
      "Высокая текучесть кадров",
      "Снижение эффективности с ростом штата",
      "Неясность функций сотрудников",
      "Хаос в документообороте",
      "Долгая адаптация новичков",
      "Отсутствие системы оценки"
    ],
    "developmentActions": [
      "Создать актуальную оргсхему с именами",
      "Сформировать должностные папки",
      "Наладить еженедельный сбор статистик",
      "Организовать работу приемной",
      "Внедрить систему поощрений",
      "Провести анализ узких мест в найме"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 1.1 - Найма и адаптации персонала
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept1_1',
  'Нач. Найма',
  'Эффективные штатные сотрудники, назначенные на посты и знающие свою работу',
  '{
    "name": "Отдел 1.1 - Найма и адаптации персонала",
    "code": "1",
    "description": "Отвечает за разработку организационной структуры, найм квалифицированных сотрудников, их обучение, введение в должность и оформление кадровой документации.",
    "mainStat": "Баллы по кадровому учету, создание должностных инструкций"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 1.2 - По работе с коммуникациями
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept1_2',
  'Офис-менеджер',
  'Бесперебойно работающие коммуникации компании',
  '{
    "name": "Отдел 1.2 - По работе с коммуникациями",
    "code": "2",
    "description": "Обеспечивает быстрое движение посетителей, звонков, почты, документов и посылок. Обслуживает компьютерное и коммуникационное оборудование, обеспечивает офисных сотрудников всем необходимым для работы.",
    "mainStat": "Обработанные запросы в службу поддержки"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 1.3 - Эффективности персонала
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept1_3',
  'Инспектор',
  'Стабильные и ценные сотрудники, производящие продукты на своих постах',
  '{
    "name": "Отдел 1.3 - Эффективности персонала",
    "code": "3",
    "description": "Анализирует причины изменений в результатах работы подразделений через инспекции и доклады. Проверяет ведение статистик, следит за сохранением инструментов управления. Главная задача — обеспечить наличие квалифицированных сотрудников, обеспеченных средствами коммуникации и производящих продукты.",
    "mainStat": "Персонал с растущими показателями"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 2: КОММЕРЧЕСКИЙ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept2',
  'Коммерческий директор',
  'Максимизация доходов компании через эффективные продажи и продвижение услуг',
  'Прибыль от продаж туристических услуг, превышающая операционные расходы компании',
  'Продажи и Продвижение.',
  'Голос и Двигатель Компании. Наша миссия — донести ценность наших услуг до внешнего мира, установить с ним обмен и обеспечить компанию доходом. Мы не просто продаем; мы создаем жизненную энергию для всей компании. Именно поэтому наша ответственность и наш вклад так велики.',
  '{
    "name": "2. Коммерческий",
    "fullName": "2. Коммерческий Департамент",
    "description": "Продажи и Продвижение.",
    "longDescription": "Голос и Двигатель Компании. Наша миссия — донести ценность наших услуг до внешнего мира, установить с ним обмен и обеспечить компанию доходом. Мы не просто продаем; мы создаем жизненную энергию для всей компании. Именно поэтому наша ответственность и наш вклад так велики.",
    "mainStat": "Валовой доход компании — основной показатель результативности отдела продаж и маркетинга, отражающий общую сумму поступлений от реализации туристических услуг",
    "functions": [
      "Маркетинг и продвижение услуг",
      "Публикация",
      "Консультирование клиентов",
      "Заключение сделок",
      "Ведение клиентской базы"
    ],
    "troubleSigns": [
      "Снижение количества новых клиентов",
      "Падение конверсии из лидов в продажи",
      "Рост стоимости привлечения клиента",
      "Отсутствие эффективных рекламных материалов",
      "Нерегулярные действия по продвижению",
      "Непредсказуемые продажи"
    ],
    "developmentActions": [
      "Установить контроль за откликами",
      "Проанализировать эффективность рекламы",
      "Разработать материалы по пониманию",
      "Составить план рекламных кампаний",
      "Наладить работу с базой клиентов",
      "Внедрить реалистичное планирование продаж"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 2.4 - Маркетинга
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept2_4',
  'Маркетолог',
  'Эффективные маркетинговые кампании, генерирующие качественных лидов',
  '{
    "name": "Отдел 2.4 - Маркетинга",
    "code": "4",
    "description": "Создает заинтересованность клиентов и желание обратиться в отдел продаж с помощью рекламы, генерируя большое количество обращений.",
    "mainStat": "Количество откликов на рекламу, Стоимость привлечения клиента, Конверсия от показов к откликам"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 2.5 - Консультаций и формирования предложения
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept2_5',
  'Контент-менеджер',
  'Туристы, имеющие полное понимание наших туристических продуктов',
  '{
    "name": "Отдел 2.5 - Консультаций и формирования предложения",
    "code": "5",
    "description": "Создает инструменты для знакомства клиентов с продукцией компании: публикации, описания, презентации, выставочные стенды, материалы для продавцов.",
    "mainStat": "Кол-во понятых информационных материалов, Кол-во туристов, получивших понимание"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 2.6 - Продаж
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept2_6',
  'РОП',
  'Объем продаж туристических услуг, превышающий операционные расходы',
  '{
    "name": "Отдел 2.6 - Продаж",
    "code": "6",
    "description": "Главная задача — продавать услуги компании, обеспечивая высокий валовый доход и валовую прибыль для платежеспособности и расширения компании.",
    "mainStat": "Объем продаж услуг, Конверсия из лида в продажу"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 3: ФИНАНСОВЫЙ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept3',
  'Фин. директор',
  'Обеспечение финансовой стабильности и роста компании',
  'Сохраненные и обладающие материальной ценностью активы и резервы компании',
  'Учет и распределение средств.',
  'Хранители и Распределители Энергии Компании. Мы обеспечиваем сохранение, рост и рациональное использование средств, создавая прозрачную и дисциплинированную систему, где каждый рубль работает как инвестиция в будущее процветание. Финансовая стабильность и жизнеспособность «Острова Сокровищ» зависят от нашей точности, дисциплины и проницательности.',
  '{
    "name": "3. Финансовый",
    "fullName": "3. Финансовый Департамент",
    "description": "Учет и распределение средств.",
    "longDescription": "Хранители и Распределители Энергии Компании. Мы обеспечиваем сохранение, рост и рациональное использование средств, создавая прозрачную и дисциплинированную систему, где каждый рубль работает как инвестиция в будущее процветание. Финансовая стабильность и жизнеспособность «Острова Сокровищ» зависят от нашей точности, дисциплины и проницательности.",
    "mainStat": "Размер защищенных активов компании — показатель финансовой стабильности и способности сохранять и приумножать материальные ценности компании",
    "functions": [
      "Управление доходами и их сбор",
      "Контроль расходов и платежей",
      "Учет всех активов и операций",
      "Финансовое планирование"
    ],
    "troubleSigns": [
      "Просроченная дебиторская задолженность",
      "Отсутствие актуальных данных о маржинальности",
      "Задержки в выплате заработной платы",
      "Потери денег и имущества",
      "Авралы в отчетные периоды",
      "Штрафы от контролирующих органов"
    ],
    "developmentActions": [
      "Составить долгосрочный бюджет",
      "Организовать учет дебиторской задолженности",
      "Наладить еженедельный подсчет маржинальности",
      "Провести инвентаризацию имущества",
      "Упорядочить складской учет",
      "Автоматизировать управленческую отчетность"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 3.7 - Управления доходами
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept3_7',
  'Кассир',
  'Своевременно собранные и правильно оформленные поступления дохода',
  '{
    "name": "Отдел 3.7 - Управления доходами",
    "code": "7",
    "description": "Обеспечивает правильный учет и отражение полученных средств, ведет точный учет счетов клиентам и контролирует получение оплат.",
    "mainStat": "Поступление платежей от клиентов"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 3.8 - Управления расходами
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept3_8',
  'Фин. менеджер',
  'Своевременное выполнение финансовых обязательств перед поставщиками и партнерами',
  '{
    "name": "Отдел 3.8 - Управления расходами",
    "code": "8",
    "description": "Отвечает за правильное использование денежных средств. Осуществляет финансовое планирование, производит выплаты по одобренным расходам, включая заработную плату.",
    "mainStat": "Кредиторская задолженность (обратная)"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 3.9 - Учета
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept3_9',
  'Главбух',
  'Точно оформленные и оперативно доступные первичные документы',
  '{
    "name": "Отдел 3.9 - Учета",
    "code": "9",
    "description": "Занимается постановкой на учет нового имущества, учетом основных средств, проведением инвентаризаций.",
    "mainStat": "Учтенные активы и резервы, Своевременные налоговые отчеты"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 4: ПРОИЗВОДСТВА
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept4',
  'Директор по производству',
  'Обеспечение безупречного качества предоставляемых услуг',
  'Довольные клиенты, получившие качественно предоставленные услуги, которые превосходят их ожидания',
  'Создание продукта и сервис.',
  'Создатели Впечатлений. Мы создаем незабываемые впечатления, безупречный сервис и яркие эмоции от путешествий на Пхукете. Наша миссия — безупречно предоставить каждую услугу, от трансфера из аэропорта до сложных многодневных круизов. Качество нашей работы напрямую влияет на репутацию компании и лояльность клиентов. Мы не просто проводим экскурсии — мы создаем ценность.',
  '{
    "name": "4. Производства",
    "fullName": "4. Департамент Производства",
    "description": "Создание продукта и сервис.",
    "longDescription": "Создатели Впечатлений. Мы создаем незабываемые впечатления, безупречный сервис и яркие эмоции от путешествий на Пхукете. Наша миссия — безупречно предоставить каждую услугу, от трансфера из аэропорта до сложных многодневных круизов. Качество нашей работы напрямую влияет на репутацию компании и лояльность клиентов. Мы не просто проводим экскурсии — мы создаем ценность.",
    "mainStat": "Объем качественно предоставленных услуг — общая стоимость предоставленных туристических услуг, отражающая производительность департамента",
    "functions": [
      "Бронирование туров и услуг",
      "Организация логистики/транспорта",
      "Предоставление экскурсий",
      "Координация с поставщиками"
    ],
    "troubleSigns": [
      "Срывы сроков выполнения заказов",
      "Овербукинг в отелях и на экскурсиях",
      "Технические сбои в бронированиях",
      "Опоздания и поломки транспорта",
      "Жалобы на качество обслуживания",
      "Низкие рейтинги от туристов"
    ],
    "developmentActions": [
      "Описать технологию предоставления услуг",
      "Наладить планирование деятельности",
      "Внедрить систему управления инвентарем",
      "Установить GPS-мониторинг транспорта",
      "Создать стандарты обслуживания",
      "Организовать ежедневные отчеты"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 4.10 - Бронирования
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept4_10',
  'Менеджер',
  'Полноценное подтверждение забронированной услуги, не требующее дополнительных действий',
  '{
    "name": "Отдел 4.10 - Бронирования",
    "code": "10",
    "description": "Осуществляет бронирование экскурсий, шопинга и их транспортное обеспечение. Поддерживает актуальность информации в системе бронирования.",
    "mainStat": "Количество забронированных туров"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 4.11 - Транспорта
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept4_11',
  'Логист',
  'Трансферы высокого качества, вовремя и безопасно',
  '{
    "name": "Отдел 4.11 - Транспорта",
    "code": "11",
    "description": "Осуществляет транспортный сервис для клиентов компании, обеспечивая комфортные и безопасные перевозки по Пхукету.",
    "mainStat": "Количество успешных трансферов"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 4.12 - Предоставления
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept4_12',
  'Координатор',
  'Проведенные экскурсии превосходного качества, подтвержденные положительными отзывами',
  '{
    "name": "Отдел 4.12 - Предоставления",
    "code": "12",
    "description": "Предоставляет основные услуги компании (экскурсии, туры и т.д.), делая это так, чтобы туристы были довольны и готовы рекомендовать компанию.",
    "mainStat": "Объем предоставленных услуг, % положительных отзывов"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 5: КАЧЕСТВА (КВАЛИФИКАЦИИ)
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept5',
  'Директор по качеству',
  'Обеспечение безупречного качества всех услуг и процессов',
  'Персонал и туристические продукты, полностью соответствующие высоким стандартам качества и безопасности',
  'Контроль и обучение.',
  'Хранители Качества и Мастерства. Мы — внутренний гарант качества, наставник и двигатель улучшений. Наша миссия — обеспечить, чтобы каждый сотрудник и каждая услуга компании «Остров Сокровищ» соответствовали высочайшим стандартам, превращая «хорошо» в «безупречно». Мы — иммунная система организации, выявляющая и устраняющая отклонения, слабости и некомпетентность, чтобы обеспечить здоровье и непрерывный рост эффективности.',
  '{
    "name": "5. Качества",
    "fullName": "5. Департамент Квалификации",
    "description": "Контроль и обучение.",
    "longDescription": "Хранители Качества и Мастерства. Мы — внутренний гарант качества, наставник и двигатель улучшений. Наша миссия — обеспечить, чтобы каждый сотрудник и каждая услуга компании «Остров Сокровищ» соответствовали высочайшим стандартам, превращая «хорошо» в «безупречно». Мы — иммунная система организации, выявляющая и устраняющая отклонения, слабости и некомпетентность, чтобы обеспечить здоровье и непрерывный рост эффективности.",
    "mainStat": "Процент продукта безупречного качества — доля туристических услуг, полностью соответствующих стандартам качества и ожиданиям клиентов",
    "functions": [
      "Контроль качества услуг",
      "Обучение персонала",
      "Совершенствование процессов",
      "Работа с претензиями клиентов"
    ],
    "troubleSigns": [
      "Рост жалоб клиентов",
      "Снижение рейтингов",
      "Нарушения стандартов качества",
      "Недовольные клиенты остаются неулаженными",
      "Отсутствие системы обучения",
      "Квалификация сотрудников не повышается"
    ],
    "developmentActions": [
      "Наладить улаживание недовольства клиентов",
      "Ввести регулярные опросы клиентов",
      "Разработать стандарты качества",
      "Организовать Совет по качеству",
      "Создать библиотеку обучающих материалов",
      "Составить программы обучения для каждого сотрудника"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 5.13 - Контроля качества
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept5_13',
  'ОКК',
  'Продукты организации, соответствующие установленным стандартам компании',
  '{
    "name": "Отдел 5.13 - Контроля качества",
    "code": "13",
    "description": "Контролирует соответствие услуг стандартам качества, выявляет недовольства клиентов и улаживает их. Работает с отклонениями в качестве.",
    "mainStat": "Маржинальная прибыль на сотрудника"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 5.14 - Обучения персонала
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept5_14',
  'Тренер',
  'Эффективные и хорошо обученные сотрудники, обладающие высокой квалификацией',
  '{
    "name": "Отдел 5.14 - Обучения персонала",
    "code": "14",
    "description": "Устраняет некомпетентность персонала через аттестации и обучение, составляя материалы для повышения компетентности и продуктивности.",
    "mainStat": "Завершенные программы обучения, Часы обучения персонала"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 5.15 - Совершенствования
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept5_15',
  'Методист',
  'Компания безупречного качества с откорректированной системой управления',
  '{
    "name": "Отдел 5.15 - Совершенствования",
    "code": "15",
    "description": "Анализирует отклонения от стандартов, разрабатывает и контролирует выполнение программ совершенствования качества. Работает через Совет по качеству.",
    "mainStat": "Задачи по повышению квалификации"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 6: РАСШИРЕНИЯ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept6',
  'Директор по развитию',
  'Обеспечение долгосрочного роста и доминирования на рынке',
  'Компания с устойчивым ростом и высокой рыночной узнаваемостью, обладающая позитивным имиджем и сильной репутацией в туристической отрасли, что обеспечивает стабильный приток новых клиентов',
  'PR и новые рынки.',
  'Голос, который слышит Весь Мир. Наша задача — сделать так, чтобы о компании «Остров Сокровищ» узнали все, чтобы наше имя ассоциировалось с качеством, надежностью и лучшим отдыхом на Пхукете. Мы не просто размещаем рекламу. Мы строим репутацию, создаем широкую известность и формируем мощный поток новых клиентов, которые приходят к нам не потому, что увидели скидку, а потому, что доверяют нашему имени. Мы создаем партнеров, которые с гордостью направляют к нам своих клиентов. Мы — стратегический рычаг, который обеспечивает компании долгосрочный рост и доминирование на рынке.',
  '{
    "name": "6. Расширения",
    "fullName": "6. Департамент Расширения",
    "description": "PR и новые рынки.",
    "longDescription": "Голос, который слышит Весь Мир. Наша задача — сделать так, чтобы о компании «Остров Сокровищ» узнали все, чтобы наше имя ассоциировалось с качеством, надежностью и лучшим отдыхом на Пхукете. Мы не просто размещаем рекламу. Мы строим репутацию, создаем широкую известность и формируем мощный поток новых клиентов, которые приходят к нам не потому, что увидели скидку, а потому, что доверяют нашему имени. Мы создаем партнеров, которые с гордостью направляют к нам своих клиентов. Мы — стратегический рычаг, который обеспечивает компании долгосрочный рост и доминирование на рынке.",
    "mainStat": "Количество новых клиентов и расширение области деятельности — показатель роста клиентской базы и развития новых направлений бизнеса",
    "functions": [
      "Связи с общественностью",
      "Вводные услуги для новых клиентов",
      "Работа с партнерами",
      "Формирование имиджа компании"
    ],
    "troubleSigns": [
      "Низкая узнаваемость компании",
      "Негативные отзывы в интернете",
      "Снижение новых клиентов",
      "Неэффективные партнерские программы",
      "Плохой внешний вид компании",
      "Отсутствие вводных услуг"
    ],
    "developmentActions": [
      "Привести в порядок внешний вид компании",
      "Написать заметки в СМИ о деятельности",
      "Организовать работу с довольными клиентами",
      "Выявить и развивать партнерские связи",
      "Провести опросы для выявления вводных услуг",
      "Начать продвижение вводных программ"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 6.16 - Связей с общественностью
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept6_16',
  'PR-менеджер',
  'Широкая известность и позитивная репутация компании на туристическом рынке Пхукета',
  '{
    "name": "Отдел 6.16 - Связей с общественностью",
    "code": "16",
    "description": "Создает привлекательный имидж и репутацию компании через публикации в СМИ, мероприятия, поддержание внешнего вида компании и территории.",
    "mainStat": "Индекс узнаваемости бренда"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 6.17 - Вводных услуг
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept6_17',
  'Менеджер',
  'Новые туристы, привлеченные с помощью ознакомительных предложений',
  '{
    "name": "Отдел 6.17 - Вводных услуг",
    "code": "17",
    "description": "Привлекает новых потенциальных клиентов через выставки, конференции, активный поиск и продажу недорогих вводных продуктов для установления отношений.",
    "mainStat": "Количество новых туристов"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 6.18 - По работе с партнерами
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept6_18',
  'Партнер-менеджер',
  'Туристические агенты и партнеры компании, активно привлекающие новых туристов',
  '{
    "name": "Отдел 6.18 - По работе с партнерами",
    "code": "18",
    "description": "Привлекает к сотрудничеству партнеров (турагентства, отели), которые будут рекомендовать услуги компании, развивает партнерскую сеть.",
    "mainStat": "Новые туристы от партнеров, Количество активных партнеров"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ДЕПАРТАМЕНТ 7: АДМИНИСТРАТИВНЫЙ
-- ============================================================================
INSERT INTO public.org_metadata (type, node_id, manager, goal, vfp, description, long_description, content)
VALUES (
  'department',
  'dept7',
  'Исполнительный Директор (ИД)',
  'Обеспечение стратегического управления и развития компании',
  'Процветающая и развивающаяся компания, производящая продукт безупречного качества',
  'Стратегическое планирование и надзор.',
  'Стратегическое управление и развитие. Департамент 7 не просто выполняет административные задачи, а определяет саму суть, цели и будущее компании. Он стоит в самом начале производственного потока, так как именно здесь рождаются идеи, стратегии и планы, которые затем реализуются всеми остальными подразделениями. Этот департамент — мозговой центр и управляющее ядро всей организации. Департамент 7 в первую очередь отвечает за «Бытийность» компании: кто мы есть, каковы наши цели, какими принципами мы руководствуемся, какой образ мы создаем.',
  '{
    "name": "7. Административный",
    "fullName": "7. Административный Департамент",
    "description": "Стратегическое планирование и надзор.",
    "longDescription": "Стратегическое управление и развитие. Департамент 7 не просто выполняет административные задачи, а определяет саму суть, цели и будущее компании. Он стоит в самом начале производственного потока, так как именно здесь рождаются идеи, стратегии и планы, которые затем реализуются всеми остальными подразделениями. Этот департамент — мозговой центр и управляющее ядро всей организации. Департамент 7 в первую очередь отвечает за «Бытийность» компании: кто мы есть, каковы наши цели, какими принципами мы руководствуемся, какой образ мы создаем.",
    "mainStat": "Соотношение \"Наличные / Счета к оплате\" — это ключевая статистика, отражающая финансовую стабильность",
    "functions": [
      "Формирование стратегии и идеологии компании",
      "Высший надзор за деятельностью",
      "Финансовая политика и контроль активов",
      "Юридическая защита и безопасность",
      "Координация всех департаментов"
    ],
    "troubleSigns": [
      "Отсутствие стратегического планирования",
      "Снижение финансовых резервов",
      "Юридические проблемы и риски",
      "Низкая координация между отделами",
      "Падение общей прибыльности",
      "Отсутствие долгосрочного видения"
    ],
    "developmentActions": [
      "Разработать стратегический план на год",
      "Провести аудит юридического соответствия",
      "Установить систему KPI для всех отделов",
      "Создать резервный фонд компании",
      "Наладить еженедельные совещания директоров",
      "Внедрить систему управленческой отчетности"
    ]
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  goal = EXCLUDED.goal,
  vfp = EXCLUDED.vfp,
  description = EXCLUDED.description,
  long_description = EXCLUDED.long_description,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 7.19 - Генерального директора
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept7_19',
  'ИД',
  'Жизнеспособная и прибыльная компания, успешно развивающаяся на рынке туризма Пхукета',
  '{
    "name": "Отдел 7.19 - Генерального директора",
    "code": "19",
    "description": "Осуществляет реализацию планов Учредителя и добивается высокого уровня производительности компании. Задача — добиться от компании максимального объема продукта в рамках правил и целей Учредителя. Для координации действий подразделений в подчинении находятся Исполнительный и Рекомендательный советы.",
    "mainStat": "Маржинальная прибыль от реализации туристических услуг"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 7.20 - Официальных вопросов
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept7_20',
  'Юрист',
  'Туроператор, имеющий репутацию надежного и безопасного партнера на Пхукете',
  '{
    "name": "Отдел 7.20 - Официальных вопросов",
    "code": "20",
    "description": "Обеспечивает безопасную и законную деятельность компании. Отвечает за юридическую защиту, разработку и проверку договоров, получение лицензий. Контролирует работу охраны и взаимодействует с государственными органами.",
    "mainStat": "Баллы по контрольному списку безопасности (юридическая защита, лицензии, налоги)"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- Отдел 7.21 - Офис Совета директоров
INSERT INTO public.org_metadata (type, node_id, manager, vfp, content)
VALUES (
  'subdepartment',
  'dept7_21',
  'Учредитель',
  'Стратегическое видение и международные отношения компании как лидера туристической индустрии',
  '{
    "name": "Отдел 7.21 - Офис Совета директоров",
    "code": "21",
    "description": "Отвечает за стратегические вопросы деятельности, развитие компании, защиту и рост активов. Руководит деятельностью с помощью программ, реализующих стратегические планы.",
    "mainStat": "Соотношение \"наличные/счета к оплате\", Валовая выручка от туристических услуг, Средняя заработная плата персонала"
  }'::jsonb
)
ON CONFLICT (type, node_id) DO UPDATE SET
  manager = EXCLUDED.manager,
  vfp = EXCLUDED.vfp,
  content = EXCLUDED.content,
  updated_at = NOW();

-- ============================================================================
-- ПРОВЕРКА ЗАПОЛНЕННЫХ ДАННЫХ
-- ============================================================================

-- Проверить данные всех департаментов
SELECT 
  node_id,
  manager,
  goal,
  vfp,
  content->>'mainStat' as main_stat,
  content->>'description' as description,
  jsonb_array_length(COALESCE(content->'functions', '[]'::jsonb)) as functions_count,
  jsonb_array_length(COALESCE(content->'troubleSigns', '[]'::jsonb)) as trouble_signs_count,
  jsonb_array_length(COALESCE(content->'developmentActions', '[]'::jsonb)) as actions_count
FROM public.org_metadata
WHERE type = 'department'
ORDER BY node_id;

-- Проверить данные всех отделов
SELECT 
  node_id,
  manager,
  vfp,
  content->>'description' as description,
  content->>'mainStat' as main_stat
FROM public.org_metadata
WHERE type = 'subdepartment'
ORDER BY node_id;

